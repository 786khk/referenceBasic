# 프로그램 오류

- 에러 또는 오류
  - 프로그램 실행 중 어떤 원인에 의해 오작동, 비정상적으로 종료되는 경우
  - 발생시점에 따라 `컴파일 에러` 와 `런타임 에러`로 나뉜다

  #### 컴파일 에러
   - 컴파일시 발생하는 에러

  #### 런타임 에러
   - 실행시 발생되는 에러
   - 실행시 발생하는 `에러`와 `예외`로 구분
   - 에러(Error)
    - 프로그램 코드에서 수습될 수 없는 심각한 오류
    - EX) 메모리 부족(OutOfMemoryError) , 스택오버플로우(StackOverflowError)
   - 예외(Exception)
    - 프로그램 코드에서 수습될 수 있는 다소 미약한 오류
  #### 논리적 에러
   - 실행은 되지만 의도와 다르게 동작하는것


### 예외 클래스 계층구조

Object클래스는 EXception과 Error클래스의 조상이다.


#### RuntimeExption

- 주로 프로그래머의 실수로 발생된다.
- EX) ArrayIndexOutOfBoundsException(배열범위 벗어남), NullPointerException(null 값인 참조변수 멤버호출)

#### Exception 

- 외부의 영향으로 발생할 수 있는 에러.
- 사용자의 실수같은 외적요인으로 인해 발생할 수 있음
- 존재하지 않는 파일 참조(FileNotFoundException), 클래스 이름 잘못적음(ClassNotFoundException), 입력 데이터 형식이 잘못됨(DataFormatExcetion)


![image](https://user-images.githubusercontent.com/78067072/221392905-5a36c657-91b6-49c1-9a4b-01dcb205f08b.png)


위와 같이 Excepetion 안에 Exception이 들어갈 경우Exception 스코프가 같으니 변수명은 다르게 처리한다.

해당 파일은 [Exception/ExceptionEx1.java](https://github.com/786khk/referenceBasic/edit/main/Exception/ExceptionEx1.java) 에서 확인할 수 있다.



아래와 같은 상황일 경우


![image](https://user-images.githubusercontent.com/78067072/221393725-08450d53-b366-4d18-b1b7-afed7b95df72.png)


연산시 0으로 나눌 수 없어 ArithmeticException이 발생한다.

물론 Math.random()으로 출력결과가 나오다 중단될 수 있다.


위의 코드를 바꿔보자면 아래와 같다

```java

public class ExceptionEx3 {
   
    public static void main(String[] args) {
        int num = 100;
        int result = 0;
    
        for (int i=0; i<10; i++){
            try {
                result = num/(int)( Math.random() * 10);
                System.out.println(result);
                
            } catch (Exception e) {

                System.out.println(0); // 에외일때만  0 출력한다.
               
            }
        }
    }
}

/*
11
14
25
20
0 // 예외
33
50
12
100
0 // 예외

*/


```


for문에서 try~catch를 해야 에러인 부분도 catch가 되어 정상종료가 된다.

해당 파일은  [Exception/ExceptionEx2.java]과  [Exception/ExceptionEx3.java]에서 확인할 수 있다.

 [Exception/ExceptionEx2.java](https://github.com/786khk/referenceBasic/edit/main/Exception/ExceptionEx2.java)
 [Exception/ExceptionEx3.java](https://github.com/786khk/referenceBasic/edit/main/Exception/ExceptionEx3.java)

### try~catch문의 흐름

#### try블럭 내 예외 발생할 경우
 - 일치하는 catch를 찾는다.
 - 일치하는 catch문을 수행한다. 그 다음 try~catch문을 빠져나와 가 다음문장을 계속 실행한다.
 - 일치하는 try catch가 없다면 예외처리가 되니지않음

#### try블럭 내 예외 발생하지 않는 경우
 - catch를 수행하디많고 전체 try~ catch문을 빠져나가 수행을 계속한다.



<hr>

![image](https://user-images.githubusercontent.com/78067072/221394811-3862a5c2-0776-4728-b335-df9a74fe0700.png)


![image](https://user-images.githubusercontent.com/78067072/221394794-f27dde0b-6644-4b20-818e-22fcdbf128e5.png)






<hr>



![image](https://user-images.githubusercontent.com/78067072/221395434-88fe4808-6970-4582-abb8-550dce1330cc.png)



해당 파일은 
 [Exception/ExceptionEx7.java](https://github.com/786khk/referenceBasic/edit/main/Exception/ExceptionEx7.java)  에서 확인할 수 있다.
 
 
 <hr>
 
 
## printStackTrace()와 getMessage()

|||
|---|---|
|printStackTrace() | 예와발생시 호출 스택이었던 메서드 정보와 예외 메세지를 화면에 출력한다.|
|getMessage()|발생한 예외 클래스의 인스턴스에 저장된 메세지를 얻을 수 있다.|


![image](https://user-images.githubusercontent.com/78067072/221395618-0fb6fc30-a83f-4872-a36d-d01978560500.png)


- 얼핏보면 비정상 종료처럼 보이지만 사실은 호출 스택에 대한 정보를 출력해주는것일뿐이다. 정상종료가 되었다.
- 
해당 예제는 [Exception/ExceptionEx8.java](https://github.com/786khk/referenceBasic/edit/main/Exception/ExceptionEx8.java)에서 확인할 수 있다.


### 멀티 catch


```java

try{

}catch(AException | BException e){
  e.method(); // Exception에 선언된 method 호출불가
  if(e instanceof BException){
    BException be = (BException) e;
    be.method()
  }else{
    ...
  }
  
  System.out.println();
}
```

처럼 하나의catch블럭에 여러 Exception을 처리할 수 있다.

- 실제로 어떤 예외가 처리되었는지 구분하기 어렵다.
- 두개이상의 예외 클래스 중 부모, 자식관계에 있다면 조상클래스만 써준다
- 조상 이외의 클래스들만 | 를두고 사용한다.
- 어떤 예외인지 알고싶다면 위와 같이 instanceof를 사용해 구분한다.



### 예외 발생시키기

![image](https://user-images.githubusercontent.com/78067072/221396316-5fd30462-2da6-4146-9b2f-83d4a36f9fcf.png)



- 고의로 발생시킨 예외의 메세지를 전달해 getMessage()를 통해 전달된 메세지를 확인할 수 있음


![image](https://user-images.githubusercontent.com/78067072/221396557-4324f68a-2295-41ca-b6ee-1ea365241885.png)

- 이 예제는 컴파일 에러가 발생해 정상실행되지않음 
- 예외가 처리되어야 할 부분에 예외처리가 안됨



![image](https://user-images.githubusercontent.com/78067072/221396595-42e9a0af-2d89-42b4-8ccf-0a69da769165.png)

- 하지만 위와 같은 사례는 컴파일은 잘 되지만 런타임에러가 발생했다.
- RuntimeException은 프로그래머의 실수에 의한 예외다. 그러기떄문에 강제로 정상종료를 방해하지 않는것이다.
- RuntimeException 클래스 들은 unchecked예외라고, Exception클래스의 자손 클래스들은 checked예외 라고 한다.



### 메서드에 예외선언하기

```java

void methods() throw Exception1,Exception2 ...{
  //메서드 내용
}


```
- 예외가 여러개일 경우 ','로 구분한다.
- 자바에서 메서느 예외처리는 가능성이 있는 예외 클래스를 메서드 선언부에 같이 명시해준다.
- 메서드에 throw 로 예외를 명시하는것은 예외를 전달해 예외처리를 떠캍기는것이다.
- 예외를 전달 받은 메서드가 또다시 자신을 호출한 메서드에 전달할 수 있고 이런식으로 계쏙 호출스택에 있는 메서드들을 따라 전달되고 마지막에있는 main에서도 예외가 처리되장ㄶ으면 main메서드 마저 종료된다.




![image](https://user-images.githubusercontent.com/78067072/221401759-86a589bf-a2e0-4073-bdcd-73f9cd8b4ec2.png)
해당 예제는  [Exception/ExceptionEx15.java](https://github.com/786khk/referenceBasic/edit/main/Exception/ExceptionEx15.java)에서 확인할 수 있다.
